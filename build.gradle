plugins {
    id 'application'
}

repositories {
    mavenCentral()
    maven {
        url "https://hub.spigotmc.org/nexus/content/repositories/snapshots/"
    }
}

dependencies {
    implementation 'com.google.guava:guava:30.1.1-jre'
    compileOnly "org.spigotmc:spigot-api:${apiVersion}-R0.1-SNAPSHOT"
}

application {
    mainClass = 'surredstone.Plugin'
}

task build {
    copy {
        from "src/main/resources/plugin.yml"
        into "$buildDir/resources/main"
        filter(org.apache.tools.ant.filters.ReplaceTokens, tokens: [
            name: project.name,
            description: project.description,
            version: project.version
        ])
    }

    copy {
        from "$buildDir/libs/Surredstone.jar"
        into "server/plugins"
    }
}

jar {
    dependsOn build
    archiveFileName = "Surredstone.jar"
}
